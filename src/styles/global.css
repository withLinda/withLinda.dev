/* Tailwind directives */
@tailwind base;
@tailwind components;
@tailwind utilities;
/* Add this at the top of your global.css */
html.no-flash {
    visibility: hidden;
}
/* Finally, custom styles */
@layer base {
    body {
        @apply dark:bg-nightowl-bg text-solarized-fg dark:text-nightowl-fg;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial,
        sans-serif;
        -webkit-font-smoothing: antialiased;
        text-rendering: optimizeLegibility;
        overflow-wrap: break-word;

        /* Paper-like background for light theme - Everforest warm palette */
        background-color: #F3EAD3; /* Fallback color (Everforest bg0) */
        background-image: 
            /* Age spots and variations - using warm Everforest tones */
            radial-gradient(circle at 15% 25%, rgba(122, 138, 137, 0.08) 0%, transparent 35%),
            radial-gradient(circle at 85% 75%, rgba(167, 192, 128, 0.06) 0%, transparent 40%),
            radial-gradient(circle at 45% 60%, rgba(219, 188, 127, 0.05) 0%, transparent 30%),
            /* Subtle grain - warm Everforest tone */
            repeating-radial-gradient(circle at 50% 50%, 
                transparent 0px, 
                rgba(133, 146, 137, 0.02) 1px, 
                transparent 2px),
            /* Base aged paper color - using Everforest light colors */
            linear-gradient(145deg, 
                #F3EAD3 0%, 
                #EAE4CA 30%, 
                #E5DFC5 70%, 
                #DDD8BE 100%);
    }

    /* Reset to normal background in dark mode */
    .dark body {
        background-image: none;
    }

    /* Reset header background in dark mode */
    .dark .paper-header-bg {
        background-image: none;
        /* Removed background-color: transparent to allow the dark:bg-nightowl-bg/60 class to work */
    }

    /* Reset UI element background in dark mode */
    .dark .paper-ui-bg {
        background-image: none;
        /* Removed background-color: transparent to allow the dark:bg-nightowl-bg/60 class to work */
    }

    /* Paper-like header background for light theme - Everforest warm palette */
    .paper-header-bg {
        background-color: rgba(243, 234, 211, 0.6); /* Fallback color (Everforest bg0 with opacity) */
        background-image: 
            /* Subtle grain for header - warm Everforest tone */
            repeating-radial-gradient(circle at 50% 50%, 
                transparent 0px, 
                rgba(133, 146, 137, 0.02) 1px, 
                transparent 2px),
            /* Base color with opacity - Everforest colors */
            linear-gradient(145deg, 
                rgba(243, 234, 211, 0.6) 0%, 
                rgba(234, 228, 202, 0.6) 100%);
    }

    /* Paper-like background for UI elements in light theme - Everforest warm palette */
    .paper-ui-bg {
        background-color: rgba(243, 234, 211, 0.6); /* Fallback color (Everforest bg0 with opacity) */
        background-image: 
            /* Subtle grain for UI elements - warm Everforest tone */
            repeating-radial-gradient(circle at 50% 50%, 
                transparent 0px, 
                rgba(133, 146, 137, 0.02) 1px, 
                transparent 2px),
            /* Base color with opacity - matching header - Everforest colors */
            linear-gradient(145deg, 
                rgba(243, 234, 211, 0.6) 0%, 
                rgba(234, 228, 202, 0.6) 100%);
    }
}
@layer components {
    .prose {
        @apply max-w-none leading-normal;
        @apply text-solarized-fg dark:text-nightowl-fg;
    }

    /* Consistent color application */
    .prose p, .prose li, .prose td {
        @apply text-solarized-text dark:text-nightowl-text;
    }

    .prose h1, .prose h2, .prose h3, .prose h4, .prose strong {
        @apply text-solarized-fg dark:text-nightowl-fg;
    }
    .prose h1 {
        @apply text-4xl font-bold my-8;
        @apply text-solarized-blue dark:text-nightowl-blue;
    }

    .prose h2 {
        @apply text-3xl font-semibold my-6;
        @apply text-solarized-fg dark:text-nightowl-fg;
    }

    .prose h3 {
        @apply text-2xl font-semibold my-4;
        @apply text-solarized-fg dark:text-nightowl-fg;
    }

    .prose h4 {
        @apply text-xl font-semibold my-4;
        @apply text-solarized-fg dark:text-nightowl-fg;
    }

    .prose p {
        @apply my-6;
        @apply text-solarized-text dark:text-nightowl-text;
    }

    /* Fix for bold text in dark mode */
    .prose strong,
    .prose b {
        @apply font-bold text-solarized-fg dark:text-nightowl-fg;
    }

    /* Emphasis/italic text */
    .prose em,
    .prose i {
        @apply italic text-solarized-text dark:text-nightowl-text;
    }

    /* Inline code */
    .prose code:not(pre code) {
        @apply px-1.5 py-0.5 rounded text-sm bg-solarized-secondary dark:bg-nightowl-secondary;
        @apply text-solarized-red dark:text-nightowl-red;
    }

    /* Blockquotes */
    .prose blockquote {
        @apply pl-4 border-l-4 border-solarized-border dark:border-nightowl-border;
        @apply my-6 italic text-solarized-text dark:text-nightowl-text;
    }

    /* Images */
    .prose img {
        @apply rounded-lg shadow-lg my-8 w-full object-cover max-h-[600px];
    }

    .prose img+em {
        @apply block text-center text-sm text-solarized-text dark:text-nightowl-text -mt-6 mb-8;
    }

    /* Links */
    .prose a {
        @apply text-solarized-blue hover:text-solarized-accent dark:text-nightowl-blue dark:hover:text-nightowl-accent;
        text-decoration: underline;
        text-underline-offset: 2px;
    }

    /* Code blocks */
    .prose pre {
        @apply relative p-4 my-6 overflow-x-auto bg-solarized-secondary dark:bg-nightowl-secondary rounded-lg;
        @apply text-solarized-text dark:text-nightowl-text;
    }

    .prose pre code {
        @apply block p-0 overflow-visible bg-transparent border-0;
        @apply text-sm font-mono;
    }

    /* Tables */
    .prose table {
        @apply w-full my-6 border-collapse;
    }

    .prose thead {
        @apply bg-solarized-secondary dark:bg-nightowl-secondary;
    }

    .prose th {
        @apply p-2 text-left font-semibold border border-solarized-border dark:border-nightowl-border;
        @apply text-solarized-fg dark:text-nightowl-fg;
    }

    .prose td {
        @apply p-2 border border-solarized-border dark:border-nightowl-border;
        @apply text-solarized-text dark:text-nightowl-text;
    }

    /* Horizontal rule */
    .prose hr {
        @apply my-8 border-t border-solarized-border dark:border-nightowl-border;
    }

    /* Unordered lists */
    .prose ul {
        @apply my-6 list-disc pl-8;
        @apply text-solarized-text dark:text-nightowl-text;
    }

    /* Ordered lists */
    .prose ol {
        @apply my-6 list-decimal pl-8;
        @apply text-solarized-text dark:text-nightowl-text;
    }

    /* All list items (both ul and ol) */
    .prose li {
        @apply my-2;
        @apply text-solarized-text dark:text-nightowl-text;
    }

    /* Bold text within list items - explicit fix for the issue */
    .prose li strong,
    .prose li b {
        @apply text-solarized-fg dark:text-nightowl-fg;
    }

    /* Nested paragraphs inside list items */
    .prose li p {
        @apply my-0;
    }

    /* Make sure the markers (bullets & numbers) also use the correct color */
    .prose li::marker {
        @apply text-solarized-text dark:text-nightowl-text;
    }


/* Category heading specific styling */
h2.category {
    margin-left: 0;
}

/* Header navigation styling */
header nav h2 {
    margin-left: 17px;
}

/* Mobile-first approach for nav items */
header nav .inline-flex {
    margin-right: 0;
}

/* Desktop navigation spacing */
@media (min-width: 768px) {
    header nav .inline-flex {
        margin-right: 27px;
    }
}

/* Auto margin for last nav item */
header nav > div:last-child {
    margin-left: auto;
}
}

/* Animated Background Orbs for Glassmorphism - GPU Accelerated */
@keyframes float-1 {
  0%, 100% { 
    transform: translate3d(0, 0, 0) scale(1); 
  }
  25% { 
    transform: translate3d(30px, -30px, 0) scale(1.1); 
  }
  50% { 
    transform: translate3d(-20px, 20px, 0) scale(0.9); 
  }
  75% { 
    transform: translate3d(40px, 10px, 0) scale(1.05); 
  }
}

@keyframes float-2 {
  0%, 100% { 
    transform: translate3d(0, 0, 0) scale(1); 
  }
  25% { 
    transform: translate3d(-40px, 20px, 0) scale(0.95); 
  }
  50% { 
    transform: translate3d(30px, -40px, 0) scale(1.1); 
  }
  75% { 
    transform: translate3d(-10px, -20px, 0) scale(1); 
  }
}

@keyframes float-3 {
  0%, 100% { 
    transform: translate3d(0, 0, 0) scale(1); 
  }
  33% { 
    transform: translate3d(50px, -20px, 0) scale(1.15); 
  }
  66% { 
    transform: translate3d(-30px, 30px, 0) scale(0.85); 
  }
}

/* Background orbs container */
.orbs-container {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
  z-index: -1;
  pointer-events: none;
  transform: translateZ(0); /* Force GPU layer */
}

/* Dark mode only - hide orbs in light mode for performance */
.dark .orbs-container::before,
.dark .orbs-container::after,
.dark .orbs-container .orb {
  content: '';
  position: absolute;
  border-radius: 50%;
  filter: blur(80px);
  opacity: 0.4;
  will-change: transform; /* GPU acceleration hint */
  transform: translateZ(0); /* Create compositor layer */
}

/* Orb 1 - Cyan */
.dark .orbs-container::before {
  width: 400px;
  height: 400px;
  background: radial-gradient(circle, #7fdbca 0%, transparent 70%);
  top: 10%;
  left: 10%;
  animation: float-1 20s ease-in-out infinite;
}

/* Orb 2 - Purple */
.dark .orbs-container::after {
  width: 350px;
  height: 350px;
  background: radial-gradient(circle, #c792ea 0%, transparent 70%);
  bottom: 20%;
  right: 15%;
  animation: float-2 25s ease-in-out infinite;
}

/* Orb 3 - Blue */
.dark .orb-3 {
  position: absolute;
  width: 300px;
  height: 300px;
  background: radial-gradient(circle, #82aaff 0%, transparent 70%);
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%) translateZ(0);
  animation: float-3 30s ease-in-out infinite;
  filter: blur(80px);
  opacity: 0.3;
  will-change: transform;
}

/* Comprehensive reduced motion support */
@media (prefers-reduced-motion: reduce) {
  /* Disable all animations and transitions */
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
  
  /* Specific handling for orbs */
  .dark .orbs-container::before,
  .dark .orbs-container::after,
  .dark .orb-3 {
    animation: none;
    will-change: auto;
    transform: translateZ(0); /* Keep GPU layer but remove animation */
  }
  
  /* Reduce glassmorphism complexity for better performance */
  .paper-header-bg,
  .paper-ui-bg {
    background-image: none;
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
  }
}

/* Light mode - ensure orbs are hidden */
.orbs-container:not(.dark .orbs-container) {
  display: none;
}

/* Custom background utilities for proper light/dark mode handling */
@layer utilities {
  /* Header background - Everforest green in light, Night Owl in dark */
  .header-bg-everforest {
    background-color: rgba(229, 230, 197, 0.6); /* Everforest bg_green for light mode */
  }
  
  .dark .header-bg-everforest {
    background-color: rgba(1, 22, 39, 0.4); /* Night Owl bg/40 for dark mode */
  }
  
  /* Footer background - Everforest gradient in light, Night Owl in dark */
  .footer-bg-everforest {
    background: linear-gradient(135deg, rgba(229, 230, 197, 0.8) 0%, rgba(229, 230, 197, 0.6) 100%);
  }
  
  .dark .footer-bg-everforest {
    background: rgba(1, 22, 39, 0.8) !important; /* Night Owl bg/80 for dark mode - needs !important to override gradient */
  }
}
