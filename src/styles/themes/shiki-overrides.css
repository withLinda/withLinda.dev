/* Shiki Dual Theme Support - Light/Dark Mode */

@layer base {
  /* Base structural styles - no color overrides */
  pre.astro-code {
    border: 1px solid var(--everforest-bg3);
    border-radius: 8px;
    padding: 1rem;
    margin: 1.5rem 0;
    overflow-x: auto;
    font-size: 0.875rem;
    line-height: 1.5;
  }

  /* Let Shiki handle colors through inline styles */
  /* Light mode uses the inline color property */
  /* Dark mode uses the --shiki-dark custom properties */
  
  /* Only apply structural styles to code blocks */
  .dark pre.astro-code {
    /* Dark mode will use --shiki-dark values from inline styles */
    color: var(--shiki-dark) !important;
  }
  
  .dark pre.astro-code span {
    /* Each span has its own --shiki-dark value */
    color: var(--shiki-dark) !important;
  }

  /* Fix for prose - only structural, no color overrides */
  .prose pre.astro-code {
    margin: 1.5rem 0;
  }

  /* Scrollbar styling */
  pre.astro-code::-webkit-scrollbar {
    height: 8px;
    background-color: var(--everforest-bg0);
  }

  pre.astro-code::-webkit-scrollbar-thumb {
    background-color: var(--everforest-bg3);
    border-radius: 4px;
  }

  pre.astro-code::-webkit-scrollbar-thumb:hover {
    background-color: var(--everforest-bg4);
  }

  /* Inline code styling - different colors for light/dark */
  code:not(pre code) {
    padding: 0.125rem 0.375rem;
    border-radius: 4px;
    font-size: 0.875em;
    border: 1px solid var(--everforest-bg3);
  }

  /* Light mode inline code */
  :root code:not(pre code) {
    background-color: var(--everforest-bg1) !important;
    color: var(--everforest-red) !important;
  }

  /* Dark mode inline code */
  .dark code:not(pre code) {
    background-color: var(--everforest-bg1) !important;
    color: var(--everforest-red) !important;
  }

  /* Copy button styling (if using code copy plugins) */
  .astro-code-copy-button {
    position: absolute;
    top: 0.5rem;
    right: 0.5rem;
    background-color: var(--everforest-bg3);
    color: var(--everforest-fg);
    border: 1px solid var(--everforest-bg4);
    border-radius: 4px;
    padding: 0.25rem 0.5rem;
    font-size: 0.75rem;
    cursor: pointer;
    opacity: 0;
    transition: opacity 0.2s ease;
  }

  .astro-code:hover .astro-code-copy-button {
    opacity: 1;
  }

  .astro-code-copy-button:hover {
    background-color: var(--everforest-bg4);
  }
}

/* Language label styling */
.astro-code-lang {
  position: absolute;
  top: 0;
  right: 1rem;
  color: var(--everforest-grey1);
  font-size: 0.75rem;
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  padding: 0.25rem 0.5rem;
  background-color: var(--everforest-bg2);
  border-radius: 0 0 4px 4px;
}